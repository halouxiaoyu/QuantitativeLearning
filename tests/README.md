# é‡åŒ–äº¤æ˜“ç³»ç»Ÿæµ‹è¯•æ–‡æ¡£

## ğŸ“ æµ‹è¯•ç›®å½•ç»“æ„

```
tests/
â”œâ”€â”€ __init__.py              # æµ‹è¯•åŒ…åˆå§‹åŒ–
â”œâ”€â”€ conftest.py              # pytesté…ç½®å’Œfixtures
â”œâ”€â”€ pytest.ini              # pytesté…ç½®æ–‡ä»¶
â”œâ”€â”€ run_tests.py             # æµ‹è¯•è¿è¡Œè„šæœ¬
â”œâ”€â”€ README.md                # æœ¬æ–‡æ¡£
â”œâ”€â”€ unit/                    # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ test_data_manager.py      # æ•°æ®ç®¡ç†å™¨æµ‹è¯•
â”‚   â”œâ”€â”€ test_feature_engineer.py  # ç‰¹å¾å·¥ç¨‹å¸ˆæµ‹è¯•
â”‚   â”œâ”€â”€ test_model_trainer.py     # æ¨¡å‹è®­ç»ƒå™¨æµ‹è¯•
â”‚   â”œâ”€â”€ test_backtest_analyzer.py # å›æµ‹åˆ†æå™¨æµ‹è¯•
â”‚   â””â”€â”€ test_prediction_system.py # é¢„æµ‹ç³»ç»Ÿæµ‹è¯•
â”œâ”€â”€ integration/             # é›†æˆæµ‹è¯•
â”‚   â”œâ”€â”€ test_trading_pipeline.py  # äº¤æ˜“æµç¨‹æµ‹è¯•
â”‚   â””â”€â”€ test_end_to_end.py        # ç«¯åˆ°ç«¯æµ‹è¯•
â”œâ”€â”€ fixtures/                # æµ‹è¯•æ•°æ®
â”‚   â”œâ”€â”€ sample_data/         # æ ·æœ¬æ•°æ®
â”‚   â””â”€â”€ mock_models/         # æ¨¡æ‹Ÿæ¨¡å‹
â””â”€â”€ reports/                 # æµ‹è¯•æŠ¥å‘Š
    â”œâ”€â”€ test_reports/        # æµ‹è¯•ç»“æœæŠ¥å‘Š
    â””â”€â”€ coverage_reports/    # ä»£ç è¦†ç›–ç‡æŠ¥å‘Š
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…æµ‹è¯•ä¾èµ–

```bash
pip install pytest pytest-html pytest-cov pytest-mock
```

### è¿è¡Œæ‰€æœ‰æµ‹è¯•

```bash
# ä½¿ç”¨æµ‹è¯•è„šæœ¬
python tests/run_tests.py

# æˆ–ç›´æ¥ä½¿ç”¨pytest
pytest tests/ -v
```

### è¿è¡Œç‰¹å®šç±»å‹æµ‹è¯•

```bash
# åªè¿è¡Œå•å…ƒæµ‹è¯•
python tests/run_tests.py --unit

# åªè¿è¡Œé›†æˆæµ‹è¯•
python tests/run_tests.py --integration

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
python tests/run_tests.py --test tests/unit/test_data_manager.py
```

## ğŸ§ª æµ‹è¯•ç±»å‹

### å•å…ƒæµ‹è¯• (Unit Tests)
- **ä½ç½®**: `tests/unit/`
- **ç›®çš„**: æµ‹è¯•å•ä¸ªå‡½æ•°æˆ–ç±»çš„åŠŸèƒ½
- **ç‰¹ç‚¹**: å¿«é€Ÿã€ç‹¬ç«‹ã€å¯é‡å¤
- **è¿è¡Œ**: `pytest tests/unit/ -v`

### é›†æˆæµ‹è¯• (Integration Tests)
- **ä½ç½®**: `tests/integration/`
- **ç›®çš„**: æµ‹è¯•æ¨¡å—é—´çš„åä½œ
- **ç‰¹ç‚¹**: æµ‹è¯•çœŸå®çš„æ•°æ®æµå’Œæ¥å£
- **è¿è¡Œ**: `pytest tests/integration/ -v`

### ç«¯åˆ°ç«¯æµ‹è¯• (End-to-End Tests)
- **ä½ç½®**: `tests/integration/`
- **ç›®çš„**: æµ‹è¯•å®Œæ•´çš„äº¤æ˜“æµç¨‹
- **ç‰¹ç‚¹**: ä»æ•°æ®è·å–åˆ°å›æµ‹çš„å®Œæ•´éªŒè¯
- **è¿è¡Œ**: `pytest tests/integration/test_trading_pipeline.py -v`

## ğŸ“Š æµ‹è¯•è¦†ç›–

### æ ¸å¿ƒæ¨¡å—æµ‹è¯•
- âœ… **æ•°æ®ç®¡ç†å™¨** (`data_manager.py`)
- âœ… **ç‰¹å¾å·¥ç¨‹å¸ˆ** (`feature_engineer.py`)
- âœ… **æ¨¡å‹è®­ç»ƒå™¨** (`model_trainer.py`)
- âœ… **å›æµ‹åˆ†æå™¨** (`backtest_analyzer.py`)
- âœ… **é¢„æµ‹ç³»ç»Ÿ** (`prediction_system.py`)

### æµ‹è¯•åœºæ™¯
- âœ… æ•°æ®åŠ è½½å’Œä¿å­˜
- âœ… ç‰¹å¾æ„å»ºå’ŒéªŒè¯
- âœ… æ¨¡å‹è®­ç»ƒå’Œè¯„ä¼°
- âœ… å›æµ‹æ‰§è¡Œå’Œç»“æœåˆ†æ
- âœ… é¢„æµ‹ç”Ÿæˆå’Œä¿¡å·è¾“å‡º
- âœ… é”™è¯¯å¤„ç†å’Œè¾¹ç•Œæƒ…å†µ
- âœ… æ€§èƒ½æŒ‡æ ‡å’Œä¸€è‡´æ€§æ£€æŸ¥

## ğŸ”§ æµ‹è¯•é…ç½®

### pytesté…ç½®
- **æµ‹è¯•å‘ç°**: è‡ªåŠ¨å‘ç°`test_*.py`æ–‡ä»¶
- **è¾“å‡ºæ ¼å¼**: è¯¦ç»†è¾“å‡ºï¼Œå½©è‰²æ˜¾ç¤º
- **è­¦å‘Šå¤„ç†**: å¿½ç•¥å¸¸è§è­¦å‘Š
- **æ ‡è®°ç³»ç»Ÿ**: æ”¯æŒå•å…ƒ/é›†æˆæµ‹è¯•æ ‡è®°

### æµ‹è¯•æ•°æ®
- **æ ·æœ¬æ•°æ®**: ç”Ÿæˆæ¨¡æ‹Ÿè‚¡ç¥¨æ•°æ®
- **æ¨¡æ‹Ÿæ¨¡å‹**: åˆ›å»ºæµ‹è¯•ç”¨çš„æœºå™¨å­¦ä¹ æ¨¡å‹
- **ä¸´æ—¶ç›®å½•**: æ¯ä¸ªæµ‹è¯•ä½¿ç”¨ç‹¬ç«‹çš„ä¸´æ—¶ç›®å½•

## ğŸ“ˆ æµ‹è¯•æŠ¥å‘Š

### HTMLæŠ¥å‘Š
- **ä½ç½®**: `tests/reports/test_report_YYYYMMDD_HHMMSS.html`
- **å†…å®¹**: è¯¦ç»†çš„æµ‹è¯•ç»“æœå’Œå¤±è´¥ä¿¡æ¯
- **æ ¼å¼**: è‡ªåŒ…å«HTMLï¼Œå¯ç›´æ¥åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹

### è¦†ç›–ç‡æŠ¥å‘Š
- **ä½ç½®**: `tests/reports/coverage_report_YYYYMMDD_HHMMSS.html`
- **å†…å®¹**: ä»£ç è¦†ç›–ç‡ç»Ÿè®¡å’Œæœªè¦†ç›–ä»£ç 
- **ç›®æ ‡**: è¾¾åˆ°80%ä»¥ä¸Šçš„ä»£ç è¦†ç›–ç‡

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **å¯¼å…¥é”™è¯¯**
   ```bash
   # ç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ
   cd /path/to/your/project
   python tests/run_tests.py
   ```

2. **ä¾èµ–ç¼ºå¤±**
   ```bash
   # å®‰è£…æµ‹è¯•ä¾èµ–
   pip install pytest pytest-html pytest-cov
   ```

3. **æµ‹è¯•å¤±è´¥**
   ```bash
   # æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯
   pytest tests/ -v -s
   ```

### è°ƒè¯•æŠ€å·§

1. **è¿è¡Œå•ä¸ªæµ‹è¯•**
   ```bash
   pytest tests/unit/test_data_manager.py::TestDataManager::test_init -v -s
   ```

2. **æŸ¥çœ‹æµ‹è¯•è¾“å‡º**
   ```bash
   pytest tests/ -v -s --tb=long
   ```

3. **è·³è¿‡æ…¢é€Ÿæµ‹è¯•**
   ```bash
   pytest tests/ -m "not slow"
   ```

## ğŸ“ æ·»åŠ æ–°æµ‹è¯•

### åˆ›å»ºå•å…ƒæµ‹è¯•
```python
# tests/unit/test_new_module.py
import pytest
from modules.new_module import NewClass

class TestNewClass:
    def test_new_function(self):
        """æµ‹è¯•æ–°åŠŸèƒ½"""
        obj = NewClass()
        result = obj.new_function()
        assert result is not None
```

### åˆ›å»ºé›†æˆæµ‹è¯•
```python
# tests/integration/test_new_pipeline.py
import pytest

def test_new_pipeline():
    """æµ‹è¯•æ–°æµç¨‹"""
    # æµ‹è¯•ä»£ç 
    pass
```

### è¿è¡Œæ–°æµ‹è¯•
```bash
# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
pytest tests/unit/test_new_module.py -v

# è¿è¡Œæ‰€æœ‰æ–°æµ‹è¯•
pytest tests/ -k "new" -v
```

## ğŸ¯ æµ‹è¯•ç›®æ ‡

### è´¨é‡ç›®æ ‡
- **ä»£ç è¦†ç›–ç‡**: â‰¥80%
- **æµ‹è¯•é€šè¿‡ç‡**: 100%
- **æµ‹è¯•æ‰§è¡Œæ—¶é—´**: <5åˆ†é’Ÿ
- **æµ‹è¯•ç¨³å®šæ€§**: å¯é‡å¤æ‰§è¡Œ

### åŠŸèƒ½éªŒè¯
- âœ… æ•°æ®æµç¨‹æ­£ç¡®æ€§
- âœ… ç‰¹å¾è®¡ç®—å‡†ç¡®æ€§
- âœ… æ¨¡å‹è®­ç»ƒç¨³å®šæ€§
- âœ… å›æµ‹ç»“æœåˆç†æ€§
- âœ… é¢„æµ‹ç³»ç»Ÿå¯é æ€§

## ğŸ“ æ”¯æŒ

å¦‚æœ‰æµ‹è¯•ç›¸å…³é—®é¢˜ï¼Œè¯·ï¼š
1. æŸ¥çœ‹æµ‹è¯•è¾“å‡ºå’Œé”™è¯¯ä¿¡æ¯
2. æ£€æŸ¥æµ‹è¯•é…ç½®å’Œä¾èµ–
3. å‚è€ƒç°æœ‰æµ‹è¯•ç”¨ä¾‹
4. è”ç³»å¼€å‘å›¢é˜Ÿ

---

**æœ€åæ›´æ–°**: 2025-08-18
**æµ‹è¯•çŠ¶æ€**: âœ… æ´»è·ƒç»´æŠ¤
